!function(e){function t(t,a,n){t.on("mousedown touchstart",function(o){t.addClass("draggable"),a.addClass("resizable");var s=o.pageX?o.pageX:o.originalEvent.touches[0].pageX,i=t.outerWidth(),l=t.offset().left+i-s,u=n.offset().left,f=n.outerWidth();minLeft=u+10,maxLeft=u+f-i-10,t.parents().on("mousemove touchmove",function(t){var n=t.pageX?t.pageX:t.originalEvent.touches[0].pageX;leftValue=n+l-i,leftValue<minLeft?leftValue=minLeft:leftValue>maxLeft&&(leftValue=maxLeft),widthValue=100*(leftValue+i/2-u)/f+"%",e(".draggable").css("left",widthValue).on("mouseup touchend touchcancel",function(){e(this).removeClass("draggable"),a.removeClass("resizable")}),e(".resizable").css("width",widthValue)}).on("mouseup touchend touchcancel",function(){t.removeClass("draggable"),a.removeClass("resizable")}),o.preventDefault()}).on("mouseup touchend touchcancel",function(e){t.removeClass("draggable"),a.removeClass("resizable")})}e.fn.beforeAfter=function(){var a=this,n=a.width()+"px";a.find(".resize img").css("width",n),t(a.find(".handle"),a.find(".resize"),a),e(window).resize(function(){var e=a.width()+"px";a.find(".resize img").css("width",e)})}}(jQuery);
