jQuery(document).ready(function(e){var t=true,n=wp.media.editor.send.attachment;e(".dc-wp-fields-uploader .upload_button").click(function(r){var i=wp.media.editor.send.attachment;var s=e(this);var o=e(this).data("mime");var u=s.attr("id").replace("_button","");t=true;wp.media.editor.send.attachment=function(r,i){console.log(JSON.stringify(r)+":"+JSON.stringify(i));if(t){if(o=="image"){e("#"+u+"_display").attr("src",i.url).removeClass("placeHolder").show();if(e("#"+u+"_preview").length>0)e("#"+u+"_preview").attr("src",i.url)}else{e("#"+u+"_display").attr("href",i.url);if(i.icon)e("#"+u+"_display span").css("background",'url("'+i.icon+'")').css("width","48px").css("height","64px")}e("#"+u).val(i.url);e("#"+u).hide();s.hide();e("#"+u+"_remove_button").show()}else{return n.apply(this,[r,i])}};wp.media.editor.open(s);return false});e(".dc-wp-fields-uploader .remove_button").each(function(){var t=e(this);var n=e(this).data("mime");var r=t.attr("id").replace("_remove_button","");if(n=="image")var i=e("#"+r+"_display").attr("src");else var i=e("#"+r+"_display").attr("href");if(i.length==0)t.hide();else e("#"+r+"_button").hide();t.click(function(t){r=e(this).attr("id").replace("_remove_button","");if(n=="image"){e("#"+r+"_display").attr("src","").addClass("placeHolder").hide();e("#"+r+"_preview").attr("src","")}else{e("#"+r+"_display").attr("href","#")}e("#"+r).val("");e(this).hide();e("#"+r+"_button").show();return false})});e(".add_media").on("click",function(){t=false})})
