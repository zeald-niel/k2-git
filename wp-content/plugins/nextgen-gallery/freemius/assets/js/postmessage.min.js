!function(t,e){var s=this;s.FS=s.FS||{},s.FS.PostMessage=function(){var s,n=!1,o=new NoJQueryPostMessageMixin("postMessage","receiveMessage"),i={},r=decodeURIComponent(document.location.hash.replace(/^#/,"")),a=r.substring(0,r.indexOf("/","https://"===r.substring(0,"https://".length)?8:7)),c=function(){o.receiveMessage(function(t){var e=JSON.parse(t.data);if(i[e.type])for(var s=0;s<i[e.type].length;s++)i[e.type][s](e.data)},s)},u=""!==r,p=t(window),g=t("html");return{init:function(t,e){s=t,c(),FS.PostMessage.receiveOnce("forward",function(t){window.location=t.url}),e=e||[],e.length>0&&p.on("scroll",function(){for(var t=0;t<e.length;t++)FS.PostMessage.postScroll(e[t])})},init_child:function(){this.init(a),n=!0,t(window).bind("load",function(){FS.PostMessage.postHeight(),FS.PostMessage.post("loaded")})},hasParent:function(){return u},postHeight:function(e,s){e=e||0,s=s||"#wrap_section",this.post("height",{height:e+t(s).outerHeight(!0)})},postScroll:function(t){this.post("scroll",{top:p.scrollTop(),height:p.height()-parseFloat(g.css("paddingTop"))-parseFloat(g.css("marginTop"))},t)},post:function(t,e,s){console.debug("PostMessage.post",t),s?o.postMessage(JSON.stringify({type:t,data:e}),s.src,s.contentWindow):o.postMessage(JSON.stringify({type:t,data:e}),r,window.parent)},receive:function(t,s){console.debug("PostMessage.receive",t),e===i[t]&&(i[t]=[]),i[t].push(s)},receiveOnce:function(t,e){this.is_set(t)||this.receive(t,e)},is_set:function(t){return e!=i[t]},parent_url:function(){return r},parent_subdomain:function(){return a}}}()}(jQuery);