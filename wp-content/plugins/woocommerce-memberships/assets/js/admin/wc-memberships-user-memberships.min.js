(function(){"use strict";jQuery(document).ready(function(a){var b,c,d,e,f,g;if(g=null!=(e=window.wc_memberships_admin)?e:{},d=null!=(f=window.pagenow)?f:"","edit-wc_user_membership"!==d&&"wc_user_membership"!==d||(a(".delete-membership").on("click",function(a){return confirm(g.i18n.delete_membership_confirm)}),a("input.action").on("click",function(b){var c,d;return b.preventDefault(),c=a(this).parent("div"),d=c.find("select"),"delete"!==d.val()?"export"!==d.val()||a("#posts-filter").submit():confirm(g.i18n.delete_memberships_confirm)?a("#posts-filter").submit():void 0}),a(".delete-membership-and-subscription").on("click",function(b){var c;if(b.preventDefault(),confirm(g.i18n.delete_membership_confirm))return c={action:"wc_memberships_delete_membership_and_subscription",security:g.delete_user_membership_subscription_nonce,user_membership_id:a(this).data("user-membership-id"),subscription_id:a(this).data("subscription-id")},a.post(g.ajax_url,c,function(a){return console.log(a),window.location.href=g.user_membership_url})})),"wc_user_membership"===d)return b=a(".js-user-membership-date").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,showOn:"button",buttonImage:g.calendar_image,buttonImageOnly:!0,onSelect:function(c){var d,e,f;return f=a(this).is("#_start_date")?"minDate":"maxDate",e=a(this).data("datepicker"),d=a.datepicker.parseDate(e.settings.dateFormat||a.datepicker._defaults.dateFormat,c,e.settings),b.not(this).datepicker("option",f,d)}}),c={opacity:.6},a("#wc-memberships-user-membership-data").on("click","a.js-calc-plan-date",function(b){var c,d,e,f,h,i;return b.preventDefault(),a(this).hasClass("js-calc-plan-start-date")?(i="start",f="wc_memberships_get_membership_plan_start_date"):(i="end",f="wc_memberships_get_membership_plan_end_date"),d=a("#post_parent"),e=a("#_start_date"),c=a("#_end_date"),h={action:f,security:g.get_membership_date_nonce,plan:d.val(),start_date:e.val()},a.post(g.ajax_url,h,function(a){if(a)return"start"===i?e.val(a.data.substring(0,10)):c.val(a.data.substring(0,10))})}),a("#post_parent").on("change",function(b){var c,d,e,f,h;if(f=a(this).val())return d=a("#_start_date"),c=a("#_end_date"),h={action:"wc_memberships_get_membership_plan_start_date",security:g.get_membership_date_nonce,plan:f,start_date:d.val()},a.post(g.ajax_url,h,function(a){if(a)return d.val(a.data.substring(0,10))}),e={action:"wc_memberships_get_membership_plan_end_date",security:g.get_membership_date_nonce,plan:f,start_date:d.val()},a.post(g.ajax_url,e,function(a){if(a)return c.val(a.data.substring(0,10))})}),a(".post_status_field").on("change","select#post_status",function(b){var c;if("wcm-expired"===a(this).val())return c=a("#_end_date"),c.datepicker(),c.datepicker("setDate",new Date)}),a("#wc-memberships-user-membership-notes").on("click","a.js-add-note",function(b){var d,e;if(b.preventDefault(),e=a("textarea#user-membership-note").val())return a("#wc-memberships-user-membership-notes").block({message:null,overlayCSS:c}),d={action:"wc_memberships_add_user_membership_note",post_id:a("#post_ID").val(),note:e,notify:a("#note-notify").is(":checked"),security:g.add_user_membership_note_nonce},a.post(g.ajax_url,d,function(b){var c;return c=a(b),a("ul.wc-user-membership-notes").prepend(c.find("#notes").html()),a("ul.wc-user-membership-recent-activity").prepend(c.find("#recent-activity").html()),a("#wc-memberships-user-membership-notes").unblock(),a("textarea#user-membership-note").val(""),a("#note-notify").prop("checked",!1)})}).on("click","a.js-delete-note",function(b){var d,e;return b.preventDefault(),e=a(this).closest("li.note"),a(e).block({message:null,overlayCSS:c}),d={action:"wc_memberships_delete_user_membership_note",note_id:a(e).attr("rel"),security:g.delete_user_membership_note_nonce},a.post(g.ajax_url,d,function(b){return a(e).remove()})})})}).call(this);