(function(){"use strict";jQuery(document).ready(function(a){var b,c,d,e,f,g;return g=null!=(e=window.wc_memberships_admin)?e:{},c=function(a){var b;return b={type:a.split("|")[0],name:a.split("|")[1]}},b=function(a){var b;switch(b={},a.type){case"taxonomy":b.action="wc_memberships_json_search_terms",b.security=g.search_terms_nonce,b.taxonomy=a.name;break;case"post_type":b.action="product"===a.name?"woocommerce_json_search_products_and_variations":"wc_memberships_json_search_posts",b.security="product"===a.name?g.search_products_nonce:g.search_posts_nonce,b.post_type=a.name}return b},d=function(b){var c;return c=0,a("table."+b+"-rules tbody."+b+"-rule").each(function(d,e){if(!a(e).hasClass(b+"-rule-__INDEX__"))return a(e).removeClass(function(a,c){var d,e;if(e=new RegExp(b+"-rule-[0-9]","g"),d=c.match(e))return d[0]}),a(e).addClass(b+"-rule-"+c),a("input, select, textarea",e).each(function(a,b){var d;if(d=jQuery(b),d.attr("name"))return d.attr("name",d.attr("name").replace(/\[([^[]*)\]/,"["+c+"]"))}),c++})},f=function(b){var c,d,e,f;if(e=a(b).get(0).tagName,f="INPUT"===e?a('input[type="radio"][name="'+a(b).attr("name")+'"]:checked').val():a(b).val(),c=a(b).closest(".rule"),"immediate"===f){if(c.find(".js-show-if-access-schedule-immediate").removeClass("hide"),c.find(".js-hide-if-access-schedule-immediate").addClass("hide"),"SELECT"===e)return c.find(".js-access-schedule-period-selector").val(f).first().focus()}else if(c.find(".js-show-if-access-schedule-immediate").addClass("hide"),c.find(".js-hide-if-access-schedule-immediate").removeClass("hide"),"SELECT"!==e||a(b).hasClass("access_schedule-period")||c.find(".access_schedule-period").find("option").removeAttr("selected"),d=c.find(".access_schedule-amount"),d.val()||d.val(1),a(b).hasClass("js-schedule-type"))return d.focus()},g.initializeRuleset=function(e){var h,i,j;return j="."+e+"-rules",i=".js-object-ids",h=a(j),h.on("change",".js-content-type",function(d){var e,f,h;return h=b(c(a(this).val())),e=a(this).closest("tr").find(i),a(e).removeData("selected").val("").select2("destroy"),f="3.5.3"===g.select2_version?a(this).closest("tr").find("input.js-object-ids"):e,g.initializeEnhancedSelect(f,h)}),h.on("change",".js-access-schedule-period-selector",function(a){return f(this)}),h.find(i).each(function(){var d,f;if(!a(this).closest("tbody").hasClass(e+"-rule-__INDEX__"))return f=a(this).closest("tbody").find(".js-content-type").get(0).value,d=b(c(f)),g.initializeEnhancedSelect(this,d)}),h.find(".js-add-rule").click(function(){var f,j,k,l,m;return j=h.find("."+e+"-rule-__INDEX__"),l=h.children("tbody").length-1,f=a(j.prop("outerHTML").replace(/__INDEX__/g,l)),j.before(f),f.find(".js-content-type").length&&(k=f.find(".js-content-type").get(0).value,m=b(c(k)),g.initializeEnhancedSelect(f.find(i),m)),h.find(".norules").addClass("hide"),h.find("tfoot .js-remove-rules").removeClass("hide"),d(e)}),h.find(".js-remove-rules").click(function(){var b;return b=h.find('th.check-column input[type="checkbox"]:checked'),a.when(b.closest("tbody").fadeOut(400,function(){var b;return b=a(this),b.find(".js-rule-id").val()?b.addClass("hide").find(".js-rule-remove").val(1):setTimeout(function(){return b.remove()},1)})).then(function(){return h.find(".rule:visible").length<1&&(h.find(".norules").removeClass("hide"),h.find(".js-remove-rules").addClass("hide")),h.find('th.check-column input[type="checkbox"]').removeAttr("checked"),d(e)})})}})}).call(this);